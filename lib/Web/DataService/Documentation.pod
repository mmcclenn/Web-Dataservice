=head1 NAME

Web::DataService::Documentation - how to write documentation templates
for Web::DataService

=head1 SYNOPSIS

This file explains the process of creating documentation templates for a
Web::DataService application.

=head1 OVERVIEW

The documentation templates for a Web::DataService application are located by
default in the F<doc> directory.  For now, the only template engine compatible
with Web::DataService is L<Template-Toolkit|Template>, but this may change in
the future.

=head1 ELEMENTS

The following elements are available for use in documentation templates.
These are all defined in the file F<doc/doc_defs.tt>.

Most of these elements generate headers corresponding to the element name, but
you can modify these by editing C<section_label> in F<doc/doc_defs.tt>.  Most
of them also generate an introductory paragraph, which you can modify by
editing the appropriate entry in C<message>.  You can also use the WRAPPER
function of Template Toolkit to override this paragraph, in the following manner:

    <% WRAPPER PARAMETERS(special) %>
    You can use any of the following special parameters with any request:
    <% END %>

=head2 NAVTRAIL

This element is replaced by a "navigation trail" linking to each level of the
node hierarchy above the currnet node.  This is typically included in a header
file, as follows:

    <% NAVTRAIL %>

=head2 DOCSTRING

This element is replaced by the value of the C<doc_string> attribute of the
data service node corresponding to this page.  You can most easily set this by
including L<documentation strings|Web::DataService::Configuration/SYNTAX> in
your calls to C<define_node>.  Use this as follows:

    <% DOCSTRING %>

=head2 USAGE

If the 'usage' attribute has been specified for this operation node, then this
element is replaced by a list of links generated from the contents of that
attribute.  Otherwise, it is ignored.  Use this as follows:

    <% USAGE %>

Or, if you don't want a separate header for this section, use the following:

    <% INCLUDE USAGE opt_noheader=1 %>

=head2 PARAMETERS

This element takes a single argument.  It is replaced by a list of the
parameters accepted by the ruleset named by the argument, along with a brief
description of each parameter.

When used in the documentation page for an operation node, you can leave out
the argument.  In that case, the ruleset corresponding to the operation node
will be used by default.

Use it as follows:

    <% PARAMETERS(ruleset_name) %>

or, in an operation documentation page, simply:

    <% PARAMETERS %>

=head2 METHODS

This element is replaced by a list of the accepted HTTP methods.  The list of
accepted methods may vary from node to node, depending upon how you use the
node attribute C<allow_method>.  Use it as follows:

    <% METHODS %>

=head2 RESPONSE

This element is only valid in documentation templates for operation nodes.  It
is replaced by a list of the data fields that are generated by this operation,
including those in the optional output blocks.  The listing for each data
field includes a brief description.  If multiple vocabularies are available,
then the name of each field in each vocabulary will be reported.

=head2 FORMATS

This element is a replaced by a list of the data formats that are provided by
the data service and allowed for this node.  This list may vary from node to node,
depending upon how you use the node attribute C<allow_format>.  You may follow
the element name with one or both of the following options:

=over

=item opt_extended=1

Include the documentation string for each format.  Without this option, the
list includes just the format name and suffix and a link to its documentation
page.

=item opt_all=1

List all formats, not just those available for this node.

=back

Use it as follows:

    <% FORMATS %>

or:

    <% INCLUDE FORMATS opt_extended=1 opt_all=1 %>

=head2 VOCABULARIES

This element is replaced by a list of the vocabularies that are provided by
the data service and allowed for this node.  This list may vary from node to
node, depending upon how you use the node attribute C<allow_vocab>.  You may
follow the element name with one or both of the following options: 

=over

=item opt_extended=1

Include the documentation string for each vocabulary.  Without this option, the
list includes just the format name and suffix and a link to its documentation
page.

=item opt_all=1

List all vocabularies, not just those available for this node.

=back

Use it as follows:

    <% VOCABULARIES %>

or:

    <% INCLUDE VOCABULARIES opt_extended=1 opt_all=1 %>
